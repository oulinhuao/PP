<!--三件好事-->
<!DOCTYPE html>
<html >
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>提升</title>
		<!--标准mui.css-->
		<link rel="stylesheet" href="../css/mui.css"/>
		<link rel="stylesheet" href="../css/global.css"/>
		<link rel="stylesheet" href="../css/promote_3event.css"/>
		
		<script src="../js/angular.js"></script>
		<script src="../js/global.js"></script>
		<script src="../js/testing.js"></script>
		<script src="../js/location.js"></script>
		<script src="../js/promote_3event.js"></script>
		
	</head>
	<body>
		<div class="layout_content">
			<div id="layout_title" class="layout_data machparent_width" >
				<span id="data" class="txt_small" ng-controller='sd'></span>
			</div>
			
			<div class="layout_controller" ng-app='event'>
				<!--好事1-->
				<div id="event1" ng-controller="event1" class="layout_event space_20 machparent_width">
					<!--序号、按钮-->
					<div class="write_bg" ng-click="switchState()" ng-class="{true: 'ctrl_num', false: 'ctrl_edit'}[state == 2]">
						<span ng-show="state == 2" style="font-size: 30px;">1</span>
					</div>
					<!--输入框/内容-->
					<div class="write_content_bg">
						<textarea id='msg_input1' ng-show="state == 1" ng-model="contentMsg" maxlength="40" rows="1"  type="text" class='input-text'></textarea>
						<span id='msg_show1' ng-show="contentMsg && state == 2" class="msg">{{contentMsg}}</span>
					</div>
				</div>
				
				<div class="layout_event space_20 machparent_width">
					<div class="write_bg">
						<span style="font-size: 30px;">2</span>
					</div>
				</div>
				
				<div class="layout_event space_20 machparent_width">
					<div class="write_bg">
						<span style="font-size: 30px;">3</span>
					</div>
				</div>
			</div>
			
			<!--标签-->
			<div id="layout_foot" class="layout_foot">
				<table class="layout_bookmark" border="0px" cellspacing="0px" cellpadding="0px" class="width_machparent">
					<tr >
						<th>
							<img src="../image/icon_bookmark.png" width="20px" height="20px" style="margin-top: 2px; margin-right: 4px;">
						</th>
						</th>
						<th>
							<span class="bookmark">标签</span>
						</th>
					</tr>
				</table>
				
				<table border="0px" cellspacing="0px" cellpadding="0px" class="foot_table width_machparent">
					<tr >
						<th class="foot_table_cell">
							<span id="txt_state" class="txt_withbg">完美的一天</span>
							<span >&nbsp;&nbsp;</span>
							<span id="txt_scole" class="txt_withbg">5分</span>
						</th>
						<th class="foot_table_line" style="width: 2px; background-color: #FFFFFF;">
						</th>
						<th class="foot_table_cell" style="text-align:center;vertical-align:middle">
							<table class="layout_bookmark" border="0px" cellspacing="0px" cellpadding="0px" class="width_machparent">
								<tr >
									<th>
										<img src="../image/icon_people.png" width="50px" height="40px" style="margin-top: 2px; margin-right: 4px;">
									</th>
									</th>
									<th>
										<span style="color: #882d28;" style="display:inline-block;padding-bottom: 10px;">看看朋友>></span>
									</th>
								</tr>
							</table>
						</th>
					</tr>
				</table>
			</div>
			
		</div>	
		
		<script type="text/javascript">
		  document.getElementById('data').innerText = getDate() + "  " + getWeek();
		  
//		  var loginApp = angular.module("event1", []);
		  
		  // 好事应用
		  var eventApp = angular.module("event",[]);
		  
		  // 好事1
		  eventApp.controller('event1',function($scope){
		  	// 状态，
		  	// 0 初始状态，只有一个按钮，按钮显示编辑
		  	// 1 编辑状态，显示输入框，可以输入文字
		  	// 2 内容状态，已经包含内容，直接显示内容，而输入框不可见
		  	$scope.state = 0;
		  	
		  	// 定义一个重置方法，
		  	$scope.reset = function(){
		  		$scope.state = 0;
		  		$scope.contentMsg = '';
//		  		$scope.state = 2; // 目前为测试，默认显示内容
//		  		$scope.contentMsg = "今天跑了三公里，很爽";
		  	}
		  	
		  	// 切换状态的函数
		  	$scope.switchState = function(){
		  		if($scope.state != 1){
		  			// 不论哪种状态，点击按钮都置为编辑状态
		  			$scope.state = 1
		  		}else{
		  			// 有内容则为内容状态,否则为默认
		  			$scope.contentMsg ? $scope.state = 2 : $scope.state = 0;
		  		}
		  	}
		  	
		  	// 调用一次方法，给内容赋值
		  	$scope.reset();
		  	
		  });
		  
		  
	 	</script>
		
	</body>

</html>
